<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>IFE ECMAScript Day 22</title>
    <style>
        .btns button {
            display: block
        }
    </style>
</head>

<body>
    <div>
        <label>Number A:
            <input id="radio-a" type="radio" name="math-obj" value="a">
        </label>
        <input id="num-a" type="text">
        <label>Number B:
            <input id="radio-b" type="radio" name="math-obj" value="b">
        </label>
        <input id="num-b" type="text">
    </div>
    <div class="btns">
        <button>判断当前选中的输入框输入内容是否为数字</button>
        <button>把 A 四舍五入为 B 个小数位数的数字</button>
        <button>当前选中数字的绝对值</button>
        <button>对当前选中的数字进行上舍入</button>
        <button>对当前选中的数字进行下舍入</button>
        <button>把当前选中的数字四舍五入为最接近的整数</button>
        <button>返回 A 和 B 中的最高值</button>
        <button>返回 A 和 B 中的最低值</button>
    </div>
    <p id="result"></p>

    <script>

        let btns = document.querySelectorAll('button')
        let r = document.querySelector('#result')
        let iA = document.querySelector('#num-a')
        let iB = document.querySelector('#num-b')

        getCheckedV = () => { // 获取选中 radio 的 value 值
            let radios = document.getElementsByName('math-obj')
            for (let i = 0; i < radios.length; i++) {
                if (radios[i].checked) {
                    var v = document.querySelector('#num-' + radios[i].value).value
                    break
                }
            }
            if (Number(v)) {
                return Number(v)
            } else {
                return -1
            }
        }

        btns[0].addEventListener('click', function () { // 检验是不是数字
            let v = getCheckedV()
            if (v === -1) {
                r.innerHTML = '不是数字'
            } else {
                r.innerHTML = '是数字'
            }
        })

        btns[1].addEventListener('click', function () {
            if (iA.value && iB.value) {
                r.innerHTML = Number(iA.value).toFixed(parseFloat(iB.value))
            } else {
                console.log('输入框不能为空')
            }
        })

        btns[2].addEventListener('click', function () {
            let i = checkedInput()
            if (i) {
                let v = document.querySelector('#num-' + i).value
                if (Number(v) > 0) {
                    r.innerHTML = v
                } else if (Number(v) < 0) {
                    r.innerHTML = 0 - v
                } else {
                    r.innerHTML = 0
                }
            } else {
                console.log('没有输入框被选中')
            }
        })

        btns[3].addEventListener('click', function () {
            let i = checkedInput()
            if (i) {
                let v = document.querySelector('#num-' + i).value
                if (Number(v)) {
                    r.innerHTML = Math.ceil(Number(v))
                }
            } else {
                console.log('没有输入框被选中')
            }
        })

        btns[4].addEventListener('click', function () {
            let i = checkedInput()
            if (i) {
                let v = document.querySelector('#num-' + i).value
                if (Number(v)) {
                    r.innerHTML = Math.floor(Number(v))
                }
            } else {
                console.log('没有输入框被选中')
            }
        })

    </script>
</body>

</html>