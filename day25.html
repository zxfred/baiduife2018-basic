<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>IFE ECMAScript Day 25</title>
</head>

<body>

    <!--  task2-4 -->

    <p id="time"></p>

    <!--  task5 -->

    <select id="year-select"></select>
    <select id="month-select"></select>
    <select id="day-select">
        <option value="1">1</option>
    </select>
    <select id="hour-select"></select>
    <select id="minute-select"></select>
    <select id="second-select"></select>

    <p id="result-wrapper">现在距离 2001年1月1日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>
    
</body>
<script>
    /* ---------- task5 ---------- */

    function insertOptionNode (parent, startnum, endnum) { // 向父节点插入一定数量的option子节点方法
        for(let i = startnum; i <= endnum; i++){
            let newNode = document.createElement('option')
            newNode.setAttribute('value', i)
            newNode.innerHTML = i
            parent.appendChild(newNode)
        } 
    }

    // 根据选择的月份插入相应的天数

    // 插入节点
    insertOptionNode(document.querySelector('#year-select'), 2000, 2032)
    insertOptionNode(document.querySelector('#month-select'), 1, 12)
    // insertOptionNode(document.querySelector('#day-select'), 1, 31)
    insertOptionNode(document.querySelector('#hour-select'), 0, 23)
    insertOptionNode(document.querySelector('#minute-select'), 0, 59)
    insertOptionNode(document.querySelector('#second-select'), 0, 59)

    /* 判断闰年
     * @param year {Number} 传入年份
     * @return {Boolean} true: 是闰年; false: 不是闰年
     */
    function isLeapYear (year) {
        return year % 4 === 0 && year % 100 !== 0 || year % 400 == 0
    }

    //function count

    /* ---------- task2-4 ---------- */

    start()

    function start() {
        updateTime(0)
        setInterval(() => {
            updateTime(0)
        }, 1000)
    }

    function updateTime(type) { // 0中文 1英文
        let p = document.querySelector('#time')
        if (type === 0) {
            p.innerHTML = getNow()
        } else if (type === 1) {
            p.innerHTML = newGetNow()
        }
    }

    function getNow() { //格式为 YYYY 年 MM 月 DD 日 星期 D HH:mm:ss
        let d = new Date()
        let y = d.getFullYear()
        let m = d.getMonth() + 1
        let date = d.getDate()
        let day = parseDay(d.getDay(), 0)
        let h = parseTimeWidth(d.getHours())
        let min = parseTimeWidth(d.getMinutes())
        let sec = parseTimeWidth(d.getSeconds())
        return y + '年' + m + '月' + date + '日' + ' ' + day + ' ' + h + ':' + min + ':' + sec
        // 需求变更 
        // return y + '-' + m + '-' + date + ' ' + day + h + ':' + min + ':' + sec
    }

    function newGetNow() { // 需求变更 格式为 2008-10-10 Monday 07:10:30 PM
        let d = new Date()
        let y = d.getFullYear()
        let m = d.getMonth() + 1
        let date = d.getDate()
        let day = parseDay(d.getDay(), 1)
        let h = parseTimeWidth(d.getHours())
        let min = parseTimeWidth(d.getMinutes())
        let sec = parseTimeWidth(d.getSeconds())
        let noon = parseNoon(d.getHours())
        return y + '-' + m + '-' + date + ' ' + day + ' ' + h + ':' + min + ':' + sec + ' ' + noon
    }

    function parseNoon(num) {
        if (num < 12) {
            return 'AM'
        } else {
            return 'PM'
        }
    }

    function parseDay(day, type) { // 星期转换汉字 type 0 中文, type 1 英文
        switch (day) {
            case 0:
                return type == 0 ? '星期日' : 'Sunday'
                break
            case 1:
                return type == 0 ? '星期一' : 'Monday'
                break
            case 2:
                return type == 0 ? '星期二' : 'Tuesday'
                break
            case 3:
                return type == 0 ? '星期三' : 'Wednesday'
                break
            case 4:
                return type == 0 ? '星期四' : 'Thurday'
                break
            case 5:
                return type == 0 ? '星期五' : 'Friday'
                break
            case 6:
                return type == 0 ? '星期六' : 'Saturday'
                break
        }
    }

    function parseTimeWidth(num) { // 时间前加0
        if (num >= 0 && num < 10) {
            return '0' + num
        } else {
            return num
        }
    }

    /* ---------- task1 ---------- */

    function Go() {
        console.log("Go");
    }

    function isNumber(o) { //是否数字
        return Object.prototype.toString.call(o).slice(8, -1) === 'Number'
    }

    function GoSteps(n) {
        if (isNumber(n)) { // n是数字
            n = Math.floor(n)
            if (n > 0) {
                while (n--) {
                    Go()
                }
            }
        } else if (n === true || n === undefined) { // n不是数字
            Go()
        }
    }

    // GoSteps(10); // Go 10次
    // GoSteps(1); // Go 1次
    // GoSteps(); // Go 1次，认为缺少参数时，默认参数为1
    // GoSteps(0); // 0次
    // GoSteps(-1); // 0次
    // GoSteps(1.4); // Go 1次
    // GoSteps(1.6); // Go 1次
    // GoSteps(-1); // 0次
    // GoSteps(true); // Go 1次
    // GoSteps(false); // 0次
    // GoSteps("Test"); // 0次
    // GoSteps(NaN); // 0次
    // GoSteps(null); // 0次
</script>

</html>